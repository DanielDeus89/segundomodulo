<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Lesson 02 - English Class</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>

  <div style="margin: 20px 0;">
    <label style="font-weight: bold;">
      <input type="checkbox" id="devCheckbox" onchange="toggleDevMode()" />
      ğŸ› ï¸ Ativar Modo Desenvolvedor
    </label>
  </div>

<h1>Lesson 02</h1>
<p class="info-text">ğŸ’¡ Clique nas frases em azul para ouvir a pronÃºncia em inglÃªs.</p>

<div class="card-stack">

<!-- Card 1 -->
<div class="card active">
  <div class="grid2">

    <div class="vocab-col">
      <p><span class="text-blue">I speak.</span><br><span class="text-white">Eu falo.</span></p>
      <p><span class="text-blue">You speak.</span><br><span class="text-white">VocÃª fala.</span></p>
      <p><span class="text-blue">I speak English.</span><br><span class="text-white">Eu falo inglÃªs.</span></p>
      <p><span class="text-blue">You speak Spanish.</span><br><span class="text-white">VocÃª fala espanhol.</span></p>
      <p><span class="text-blue">I speak Portuguese.</span><br><span class="text-white">Eu falo portuguÃªs.</span></p>
      <p><span class="text-blue">You speak French.</span><br><span class="text-white">VocÃª fala francÃªs.</span></p>
    </div>

    <div class="vocab-col">
      <p><span class="text-blue">I study.</span><br><span class="text-white">Eu estudo.</span></p>
      <p><span class="text-blue">You study.</span><br><span class="text-white">VocÃª estuda.</span></p>
      <p><span class="text-blue">I study English.</span><br><span class="text-white">Eu estudo inglÃªs.</span></p>
      <p><span class="text-blue">You study Spanish.</span><br><span class="text-white">VocÃª estuda espanhol.</span></p>
      <p><span class="text-blue">I study Portuguese.</span><br><span class="text-white">Eu estudo portuguÃªs.</span></p>
      <p><span class="text-blue">You study French.</span><br><span class="text-white">VocÃª estuda francÃªs.</span></p>
    </div>
  </div>
</div>


<!-- Card 2 -->
<div class="card">
  <div class="grid2">

    <div class="vocab-col">
      <p><span class="text-blue">I speak with my friend.</span><br><span class="text-white">Eu falo com meu amigo.</span></p>
      <p><span class="text-blue">I speak with my brother.</span><br><span class="text-white">Eu falo com meu irmÃ£o.</span></p>
      <p><span class="text-blue">You speak with your father.</span><br><span class="text-white">VocÃª fala com seu pai.</span></p>
    </div>

    <div class="vocab-col">
      <p><span class="text-blue">I study with my sister.</span><br><span class="text-white">Eu estudo com minha irmÃ£.</span></p>
      <p><span class="text-blue">I study with my friend.</span><br><span class="text-white">Eu estudo com meu amigo.</span></p>
      <p><span class="text-blue">You study with your mother.</span><br><span class="text-white">VocÃª estuda com sua mÃ£e.</span></p>
    </div>

  </div>
</div>

<!-- Card 3 -->
<div class="card">
  <div class="grid2">
    <div class="vocab-col">
      <p><span class="text-blue">I speak English with my son.</span><br><span class="text-white">Eu falo inglÃªs com meu filho.</span></p>
      <p><span class="text-blue">I speak Portuguese with my daughter.</span><br><span class="text-white">Eu falo portuguÃªs com minha filha.</span></p>
      <p><span class="text-blue">You speak French with your child.</span><br><span class="text-white">VocÃª fala francÃªs com seu filho.</span></p>
      <p><span class="text-blue">You speak English with your daughter.</span><br><span class="text-white">VocÃª fala inglÃªs com sua filha.</span></p>
    </div>
  </div>
</div>


<!-- Card 4 -->
<div class="card">
  <div class="grid2">
    <div class="vocab-col">
      <p><span class="text-blue">I study Spanish with my sister.</span><br><span class="text-white">Eu estudo espanhol com minha irmÃ£.</span></p>
      <p><span class="text-blue">I study French with my children.</span><br><span class="text-white">Eu estudo francÃªs com meus filhos.</span></p>
      <p><span class="text-blue">You study Portuguese with your father.</span><br><span class="text-white">VocÃª estuda portuguÃªs com seu pai.</span></p>
      <p><span class="text-blue">You study English with your mother.</span><br><span class="text-white">VocÃª estuda inglÃªs com sua mÃ£e.</span></p>
    </div>
  </div>
</div>

   <!-- Card 7 -->
<div class="card">
    <h2 class="section-title">Verbs</h2>
  <div class="grid2">
    <div class="vocab-col">
    <p><span class="text-blue">to drink</span><br><span class="text-white">beber</span></p>
    </div>
    <div class="vocab-col">
    <p><span class="text-blue">to eat</span><br><span class="text-white">comer</span></p>
    </div>
  </div>
</div>

 <!-- Card 8 - Vocabulary -->
<div class="card">
  <h2 class="section-title">Vocabulary</h2>
  <div class="grid2">
    <div class="vocab-col">
      <p><span class="text-blue">coffee</span> | <span class="text-white">cafÃ©</span></p>
      <p><span class="text-blue">tea</span> | <span class="text-white">chÃ¡</span></p>
      <p><span class="text-blue">milk</span> | <span class="text-white">leite</span></p>
      <p><span class="text-blue">juice</span> | <span class="text-white">suco</span></p>
      <p><span class="text-blue">water</span> | <span class="text-white">Ã¡gua</span></p>
      <p><span class="text-blue">soda</span> | <span class="text-white">refrigerante</span></p>
      <p><span class="text-blue">fish</span> | <span class="text-white">peixe</span></p>
    </div>
    <div class="vocab-col">
      <p><span class="text-blue">meat</span> | <span class="text-white">carne</span></p>
      <p><span class="text-blue">cheese</span> | <span class="text-white">queijo</span></p>
      <p><span class="text-blue">ham</span> | <span class="text-white">presunto</span></p>
      <p><span class="text-blue">bread</span> | <span class="text-white">pÃ£o</span></p>
      <p><span class="text-blue">and</span> | <span class="text-white">e</span></p>
      <p><span class="text-blue">I</span> | <span class="text-white">eu</span></p>
      <p><span class="text-blue">you</span> | <span class="text-white">vocÃª</span></p>
    </div>
  </div>
</div>

<!-- Card 9 - Expressoes -->
<div class="card">
  <h2 class="section-title">ExpressÃµes</h2>
  <div class="grid2">
    <div class="vocab-col">
      <p><span class="text-blue">thank you</span> | <span class="text-white">obrigado</span></p>
      <p><span class="text-blue">thanks</span> | <span class="text-white">obrigado</span></p>
      
          </div>
    <div class="vocab-col">
      <p><span class="text-blue">please</span> | <span class="text-white">por favor</span></p>
      <p><span class="text-blue">hi</span> | <span class="text-white">oi</span></p>
         </div>
    <div class="vocab-col">
      
      <p><span class="text-blue">hello</span> | <span class="text-white">olÃ¡</span></p>
      <p><span class="text-blue">goodbye</span> | <span class="text-white">tchau</span></p>
    </div>
  </div>
</div> 
<!-- Card 10 - Grammar -->
<div class="card">
  <h2 class="section-title">Grammar</h2>
  <div class="grid2">
    
    <div class="vocab-col">
      <p><span class="text-blue">I drink</span><br><span class="text-white">Eu bebo</span></p>
      <p><span class="text-blue">I eat</span><br><span class="text-white">Eu como</span></p>
    </div>
    
    <div class="vocab-col">
      <p><span class="text-blue">You drink</span><br><span class="text-white">VocÃª bebe</span></p>
      <p><span class="text-blue">You eat</span><br><span class="text-white">VocÃª come</span></p>
    </div>
    
  </div>
</div>

</div>


  <div class="divider"></div>

  <div class="button-wrapper">
    <div class="stack-controls">
      <button onclick="prevCard()">â¬…ï¸ Anterior</button>
      <button id="nextBtn" onclick="nextCard()" disabled>PrÃ³ximo â¡ï¸</button>
      
    </div>
  </div>

  <div class="divider"></div>

  <div class="video-container">
    <div id="player"></div>
  </div>

  <script>
    const tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    document.head.appendChild(tag);
  </script>

  <script>
    let player;
    let currentIndex = 0;
    let isDevMode = false;

    const timeRanges = [
      { start: 0, end: 17 },    /*I drink.*/
      { start: 17, end: 36 },   /*I eat.*/
      { start: 36, end: 50 },   /*I drink coffee and milk.*/
      { start: 50, end: 66 },   /*I eat bread and ham.*/
      { start: 66, end: 85 },   /*I eat bread and I drink milk.*/
      { start: 85, end: 107 },  /*I eat cheese and you eat ham.*/
      { start: 105, end: 105 }

    ];

    window.onYouTubeIframeAPIReady = function () {
      player = new YT.Player('player', {
        height: '360',
        width: '640',
        videoId: '9xOqf7P6jYQ',
        playerVars: {
          rel: 0,
          modestbranding: 1,
          controls: 1
        },
        events: {
          onReady: onPlayerReady,
          onStateChange: onPlayerStateChange
        }
      });
    };

    function toggleDevMode() {
      isDevMode = document.getElementById('devCheckbox').checked;
      document.getElementById("nextBtn").disabled = !isDevMode;
    }

    function onPlayerReady() {
      seekToCurrentRange();
    }

    function onPlayerStateChange(event) {
      if (event.data === YT.PlayerState.PLAYING) {
        checkTimeLoop();
      }
    }

    function checkTimeLoop() {
      const margem = 0.3;
      const check = () => {
        if (!player || player.getPlayerState() !== YT.PlayerState.PLAYING) return;

        const currentTime = player.getCurrentTime();
        const { end } = timeRanges[currentIndex];

        console.log(`Card ${currentIndex + 1}: tempo = ${currentTime.toFixed(2)} / ${end}`);

        if (isDevMode || currentTime >= end - margem) {
          player.pauseVideo();
          document.getElementById("nextBtn").disabled = false;
          return;
        }

        requestAnimationFrame(check);
      };
      requestAnimationFrame(check);
    }

    function seekToCurrentRange() {
      const { start } = timeRanges[currentIndex];
      player.seekTo(start);
      player.playVideo();
      document.getElementById("nextBtn").disabled = !isDevMode;
    }

    function nextCard() {
      currentIndex = (currentIndex + 1) % timeRanges.length;
      showCard(currentIndex);
      seekToCurrentRange();
    }

    function prevCard() {
      currentIndex = (currentIndex - 1 + timeRanges.length) % timeRanges.length;
      showCard(currentIndex);
      seekToCurrentRange();
    }

    function showCard(index) {
      const cards = document.querySelectorAll(".card");
      cards.forEach((card, i) => {
        card.classList.toggle("active", i === index);
      });
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    window.onload = () => {
      showCard(currentIndex);
    };
  </script>
</body>
</html>
